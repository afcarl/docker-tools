#!/bin/sh

if [ -z "$1" ] || [ -z "$2" ] || [ -z "$3" ]; then
  echo "Usage: docker-run CONTAINERID /src/name /target/name"
  echo ""
  echo "Enters the Docker CONTAINER and copys file from host"
else
  CONTAINERID=$(docker inspect --format "{{.Id}}" "$1")
 
  if [ -z $CONTAINERID ]; then
    echo "Container not found"
    exit 1
  fi
 
  CONTAINERFS=(             # Compound assignment
    [aufs]='/var/lib/docker/aufs/mnt/$CONTAINERID/'
    [devicemapper]='/var/lib/docker/devicemapper/mnt/$CONTAINERID/rootfs/'
  )
  
  cp $3 ${CONTAINERFS[$(docker info | grep Storage | awk '{print $3}')]}
