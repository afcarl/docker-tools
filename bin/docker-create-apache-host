#!/bin/bash
# Arg2 = host
IP=$(docker-ip ${1})
sudo echo "NameVirtualHost *:80
<VirtualHost *:80>
        ProxyRequests off
        ServerName ${1}" > /etc/apache2/sites-available/${1}.conf
sudo echo 'ErrorLog ${APACHE_LOG_DIR}'"/error-${1}.log" >> /etc/apache2/sites-available/${1}.conf
sudo echo 'CustomLog ${APACHE_LOG_DIR}'"/access-${1}.log combined" >> /etc/apache2/sites-available/${1}.conf
sudo echo "ProxyPreserveHost On
 ProxyPass / http://${IP}:80/
 ProxyPassReverse / http://${IP}:80/
 </VirtualHost>" >> /etc/apache2/sites-available/${1}.conf
echo "Writed /etc/apache2/sites-available/${1}.conf"
a2ensite ${1}
sudo systemctl reload apache2
